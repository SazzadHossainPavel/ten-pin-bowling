<header>
  <div class="container flex-header">
    <h1>Ten-pin Bowling</h1>
  </div>
</header>

<section class="pins-container pt-2">
  <div class="container">
    <div class="pins">
      <button
        class="btn btn-roll"
        [class.disabled]="!pins.isAvailable || isGameOver"
        (click)="addPins(pins.value)"
        *ngFor="let pins of allPins"
      >
        {{ pins.value }}
      </button>
    </div>
  </div>
</section>

<section class="score-board-container pt-1">
  <div class="container">
    <div class="score-board">
      <div class="box" *ngFor="let frame of knockedPins; let i = index">
        <span class="frame">{{ frame.cumulativeSum }}</span>
        <div
          *ngFor="let roll of frame.rolls; let j = index"
          class="inner-box"
          [class.last]="frame.rolls.length === 3 && j === 0"
        >
          <span
            class="point"
            *ngIf="
              (j === 0 ||
                (j === 1 && i === 9 && +frame.rolls[0] === 10) ||
                (j === 2 &&
                  i === 9 &&
                  (+frame.rolls[1] === 10 ||
                    +frame.rolls[0] + +frame.rolls[1] === 10))) &&
                roll &&
                +roll === 10;
              else spare
            "
            >&#x2715;</span
          >
          <ng-template #spare>
            <span
              class="point"
              *ngIf="
                (j === 1 && roll && +roll + +frame.rolls[0] === 10) ||
                  (j === 2 && roll && +roll + +frame.rolls[1] === 10);
                else other
              "
              >/</span
            >
          </ng-template>

          <ng-template #other>
            <span class="point"> {{ roll }}</span>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="action-container pt-2">
  <div class="container generate-score">
    <button
      class="btn btn-primary m-1"
      [disabled]="isGameOver"
      (click)="startGame()"
    >
      Random knocked pins
    </button>

    <button class="btn btn-outline" (click)="clearScore()">Clear score</button>
  </div>
</section>
