<header>
  <div class="container flex">
    <h1>Bowling demo</h1>
  </div>
</header>

<section class="pt-2">
  <div class="container">
    <div class="pins">
      <button
        class="btn btn-roll"
        [class.disabled]="!pins.isAvailable || isGameOver"
        (click)="addPins(pins.value)"
        *ngFor="let pins of allPins"
      >
        {{ pins.value }}
      </button>
    </div>
  </div>
</section>

<section class="pt-1">
  <div class="container">
    <div class="score-board">
      <div class="box" *ngFor="let frame of knockedPins; let i = index">
        <span class="frame">{{ frame.cumulativeSum }}</span>
        <div
          *ngFor="let roll of frame.rolls; let j = index"
          class="inner-box"
          [class.last]="
            frame.rolls.length === 3 && j === 0 && roll && +roll === 10
          "
        >
          <span
            class="point"
            *ngIf="(j === 0 || i === 9) && roll && +roll === 10; else spare"
            >&#x2715;</span
          >
          <ng-template #spare>
            <span
              class="point"
              *ngIf="
                j === 1 && roll && +roll + +frame.rolls[0] === 10;
                else other
              "
              >{{ +roll > 0 ? "/" : "" }}</span
            >
          </ng-template>

          <ng-template #other>
            <span class="point"> {{ roll }}</span>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="pt-2">
  <div class="container generate-score">
    <button
      class="btn btn-primary m-1"
      [disabled]="isGameOver"
      (click)="startGame()"
    >
      Random knocked pins
    </button>

    <button class="btn btn-outline" (click)="clearScore()">Clear score</button>
  </div>
</section>
